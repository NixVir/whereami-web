<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Where Am I? - Cosmic Position Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2>Calculating Your Cosmic Journey...</h2>
            <p id="loading-status">Initializing...</p>
        </div>
    </div>

    <div id="visualization-container"></div>

    <div id="ui-overlay">
        <!-- Header -->
        <header class="app-header">
            <h1>Where Am I?</h1>
            <p class="subtitle">Your Journey Through Space and Time</p>
        </header>

        <!-- Input Form -->
        <div id="input-panel" class="panel">
            <h2>Enter Your Information</h2>

            <div class="form-section">
                <h3>Birth Information</h3>
                <div class="form-group">
                    <label for="birth-date">Birth Date</label>
                    <input type="date" id="birth-date" required>
                </div>
                <div class="form-group">
                    <label for="birth-time">Birth Time (optional)</label>
                    <input type="time" id="birth-time" placeholder="12:00">
                </div>
                <div class="form-group">
                    <label for="birth-timezone">Timezone</label>
                    <select id="birth-timezone">
                        <option value="UTC">UTC</option>
                        <option value="Eastern">Eastern (ET)</option>
                        <option value="Central">Central (CT)</option>
                        <option value="Mountain">Mountain (MT)</option>
                        <option value="Pacific">Pacific (PT)</option>
                        <option value="America/New_York">America/New_York</option>
                        <option value="America/Chicago">America/Chicago</option>
                        <option value="America/Denver">America/Denver</option>
                        <option value="America/Los_Angeles">America/Los_Angeles</option>
                        <option value="Europe/London">Europe/London</option>
                        <option value="Europe/Paris">Europe/Paris</option>
                        <option value="Asia/Tokyo">Asia/Tokyo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="birth-location">Birth Location</label>
                    <input type="text" id="birth-location" placeholder="Kansas City, MO, USA" required>
                    <small>City, State, Country</small>
                </div>
            </div>

            <div class="form-section">
                <h3>Current Information</h3>
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="use-current-time" checked>
                    <label for="use-current-time">Use current date/time</label>
                </div>
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="same-location">
                    <label for="same-location">Current location same as birth</label>
                </div>
                <div class="form-group">
                    <label for="current-location">Current Location</label>
                    <input type="text" id="current-location" placeholder="Boulder, CO, USA">
                    <small>City, State, Country</small>
                </div>
            </div>

            <button id="calculate-btn" class="primary-button">
                Calculate My Cosmic Journey
            </button>

            <div id="error-message" class="error-message" style="display: none;"></div>
        </div>

        <!-- Results Panel -->
        <div id="results-panel" class="panel" style="display: none;">
            <button id="back-btn" class="secondary-button">← New Calculation</button>

            <div class="results-header">
                <h2>Your Cosmic Journey</h2>
                <p id="journey-summary"></p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="distance-traveled">0</div>
                    <div class="stat-label">Kilometers Traveled</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="time-elapsed">0</div>
                    <div class="stat-label">Years</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="current-velocity">0</div>
                    <div class="stat-label">km/s (Current Velocity)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="light-years">0</div>
                    <div class="stat-label">Light-Years</div>
                </div>
            </div>

            <div class="cosmic-separation-section">
                <h3>Cosmic Separation</h3>
                <p class="separation-explanation" id="separation-explanation">
                    Your birth position and current position in cosmic space are now separated by:
                </p>
                <div class="separation-stat">
                    <div class="separation-value" id="separation-distance">0</div>
                    <div class="separation-label">Current separation in space</div>
                </div>
                <p class="separation-note">
                    <strong>Note:</strong> Both points are moving together with Earth, the Sun, and our galaxy through space at ~370 km/s. They maintain this separation distance as they travel through the cosmos.
                </p>
            </div>

            <div class="controls-section">
                <h3>Animation Controls</h3>
                <div class="controls">
                    <button id="play-pause-btn" class="control-button">
                        <span id="play-pause-icon">▶</span> Play Journey
                    </button>
                    <button id="restart-btn" class="control-button">↻ Restart</button>
                    <div class="speed-control">
                        <label>Speed: <span id="speed-value">1x</span></label>
                        <input type="range" id="speed-slider" min="0.5" max="5" step="0.5" value="1">
                    </div>
                </div>
            </div>

            <div class="spacecraft-section">
                <h3>Spacecraft Comparison</h3>
                <div id="spacecraft-list"></div>
            </div>

            <button id="show-details-btn" class="secondary-button">
                Show Technical Details
            </button>

            <div id="technical-details" class="technical-details" style="display: none;">
                <h3>Velocity Breakdown</h3>
                <div id="velocity-breakdown"></div>
            </div>
        </div>

        <!-- Info Button -->
        <button id="info-btn" class="info-button" title="About this project">?</button>

        <!-- Info Modal -->
        <div id="info-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>About Where Am I?</h2>
                <p>This cosmic position calculator shows you how far you've traveled through space since you were born.</p>
                <h3>What's Included:</h3>
                <ul>
                    <li>Earth's rotation (465 m/s at equator)</li>
                    <li>Earth's orbit around the Sun (29.78 km/s)</li>
                    <li>Sun's motion through the Milky Way (230 km/s)</li>
                    <li>Galactic motion through the universe (600+ km/s)</li>
                    <li>Total velocity relative to CMB (369 km/s)</li>
                </ul>
                <p><strong>You're traveling at over 1.3 million km/h through space right now!</strong></p>
                <h3>Technology:</h3>
                <ul>
                    <li>Python + Flask (calculations)</li>
                    <li>Three.js (3D visualization)</li>
                    <li>Astropy (astronomical accuracy)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Three.js and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tweenjs/tween.js@23.1.1/dist/tween.umd.js"></script>

    <!-- Our application scripts -->
    <script src="{{ url_for('static', filename='js/visualization.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
